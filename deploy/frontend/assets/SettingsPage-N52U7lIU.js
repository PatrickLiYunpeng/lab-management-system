import{r as o,I as le,f as oe,M as z,a7 as F,P as e,a0 as l,Q as U,U as N,A as Z,ar as H,ah as ee,as as ae,X as D,Y as J,a3 as de,at as ce,au as fe,av as xe,aw as me,ax as Q,a4 as he}from"./index-DVAH8G0d.js";import{R as ge}from"./ClockCircleOutlined-C4lKWGcp.js";import{P as se}from"./index-BDasguwL.js";import{R as ie}from"./ReloadOutlined-Ci7PDsnU.js";import{A as ne}from"./index-DYC5NmKL.js";import{F as re,S as pe}from"./Table-BH_IQYSB.js";import{M as ye}from"./index-D5-92eMw.js";import{R as q}from"./CheckCircleOutlined-CzFoyiHm.js";import{R as je}from"./CloseCircleOutlined-DFnUgcZ4.js";import{S as G}from"./index-C-m9zxKZ.js";import{U as ue}from"./index-ksZeLwj1.js";import{R as be}from"./InfoCircleOutlined-DHwaGtqA.js";import{R as V}from"./SafetyCertificateOutlined-DOhLpXI9.js";import{R as ve}from"./CheckOutlined-CP9fMx1j.js";var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"},we=function(c,g){return o.createElement(le,oe({},c,{ref:g,icon:Se}))},_e=o.forwardRef(we);const W={async getPermissionMatrix(){return(await z.get("/permissions/matrix")).data},async getRolePermissions(s){return(await z.get(`/permissions/role/${s}`)).data},async getPermissionDefinitions(){return(await z.get("/permissions/definitions")).data},async updatePermission(s,c,g,I){await z.put(`/permissions/role/${s}/${c}`,{is_enabled:g,reason:I})},async bulkUpdatePermissions(s){return(await z.post("/permissions/bulk-update",s)).data},async getChangeLogs(s){return(await z.get("/permissions/change-logs",{params:s})).data},async resetToDefaults(s){return(await z.post("/permissions/reset-to-defaults",null,{params:s?{role:s}:void 0})).data},async getUserEffectivePermissions(s){return(await z.get(`/permissions/user/${s}/effective`)).data}},Y={system:{label:"系统管理",permissions:["manage_users","manage_sites","manage_laboratories","manage_locations"]},clients:{label:"客户与SLA",permissions:["manage_clients","manage_client_sla","manage_source_categories"]},skills:{label:"技能管理",permissions:["manage_skill_categories","manage_skills","assign_personnel_skills"]},personnel:{label:"人员管理",permissions:["initiate_borrow","approve_borrow","manage_shifts"]},equipment:{label:"设备与方法",permissions:["manage_equipment","manage_methods"]},work_orders:{label:"工单管理",permissions:["create_work_order","assign_lead_engineer","create_subtask","assign_technician","execute_subtask","verify_results","view_work_order_query","initiate_handover"]},materials:{label:"材料管理",permissions:["manage_materials","allocate_materials","handle_material_return","confirm_material_alerts"]},reports:{label:"仪表板与报表",permissions:["view_lab_dashboard","view_all_dashboards","view_cycle_time_report","view_skills_matrix","view_reports","view_audit_logs"]}},A={admin:"error",manager:"warning",engineer:"blue",technician:"success",viewer:"default"},M={admin:"管理员",manager:"经理",engineer:"工程师",technician:"技术员",viewer:"访客"};function ke(){const{message:s}=F.useApp(),[c,g]=o.useState(!1),[I,b]=o.useState(null),[f,_]=o.useState(null),[R,T]=o.useState(!1),[L,P]=o.useState([]),[v,y]=o.useState(!1),k=o.useCallback(async()=>{g(!0);try{const i=await W.getPermissionMatrix();_(i)}catch{s.error("获取权限矩阵失败")}finally{g(!1)}},[s]);o.useEffect(()=>{k()},[k]);const B=async()=>{y(!0);try{const i=await W.getChangeLogs({limit:50});P(i)}catch{s.error("获取变更历史失败")}finally{y(!1)}},n=async(i,t,p)=>{if(i==="admin"){s.warning("管理员权限不可修改");return}const S=`${i}-${t}`;b(S);try{if(await W.updatePermission(i,t,p),s.success("权限已更新"),f){const w={...f},C=w.roles.find(h=>h.role===i);if(C){const h=C.permissions.find(u=>u.permission===t);h&&(h.is_enabled=p)}_(w)}}catch{s.error("权限更新失败")}finally{b(null)}},r=async i=>{try{const t=await W.resetToDefaults(i);s.success(`已重置 ${t.reset_count} 个权限到默认值`),k()}catch{s.error("重置失败")}},d=()=>{T(!0),B()},x=()=>{if(!f)return[];const i=[],t=f.roles[0];if(!t)return[];for(const[p,S]of Object.entries(Y))for(const w of S.permissions){const C=t.permissions.find(u=>u.permission===w);if(!C)continue;const h={key:w,permission:w,permission_label:C.permission_label,category:p,category_label:S.label,admin:!0,manager:!1,engineer:!1,technician:!1,viewer:!1};for(const u of f.roles){const $=u.permissions.find(te=>te.permission===w);$&&(u.role==="admin"?h.admin=$.is_enabled:u.role==="manager"?h.manager=$.is_enabled:u.role==="engineer"?h.engineer=$.is_enabled:u.role==="technician"?h.technician=$.is_enabled:u.role==="viewer"&&(h.viewer=$.is_enabled))}i.push(h)}return i},a=(i,t,p)=>{const S=p==="admin",w=`${p}-${t.permission}`,C=I===w;return e.jsx(Z,{title:S?"管理员权限不可修改":void 0,children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(G,{checked:i,disabled:S||C,onChange:h=>n(p,t.permission,h),size:"small"})})})},m=[{title:"权限名称",dataIndex:"permission_label",key:"permission_label",width:200,fixed:"left",render:(i,t)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,color:"#171717"},children:String(i)}),e.jsx("div",{style:{fontSize:12,color:"#737373"},children:t.permission})]})},{title:e.jsx(l,{color:A.admin,children:M.admin}),dataIndex:"admin",key:"admin",width:90,align:"center",render:(i,t)=>a(!!i,t,"admin")},{title:e.jsx(l,{color:A.manager,children:M.manager}),dataIndex:"manager",key:"manager",width:90,align:"center",render:(i,t)=>a(!!i,t,"manager")},{title:e.jsx(l,{color:A.engineer,children:M.engineer}),dataIndex:"engineer",key:"engineer",width:90,align:"center",render:(i,t)=>a(!!i,t,"engineer")},{title:e.jsx(l,{color:A.technician,children:M.technician}),dataIndex:"technician",key:"technician",width:90,align:"center",render:(i,t)=>a(!!i,t,"technician")},{title:e.jsx(l,{color:A.viewer,children:M.viewer}),dataIndex:"viewer",key:"viewer",width:90,align:"center",render:(i,t)=>a(!!i,t,"viewer")}],j=x();return e.jsxs("div",{style:{background:"#fff",borderRadius:8,border:"1px solid #e5e5e5",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid #e5e5e5",background:"#fafafa"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontWeight:500,color:"#171717"},children:"权限矩阵管理"}),e.jsx(l,{color:"blue",children:"仅管理员可见"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(U,{size:"small",icon:e.jsx(ge,{}),onClick:d,children:"变更历史"}),e.jsx(se,{title:"重置所有权限",description:"确定要将所有角色的权限重置为默认值吗？",onConfirm:()=>r(),okText:"确定",cancelText:"取消",children:e.jsx(U,{size:"small",icon:e.jsx(ie,{}),children:"重置为默认"})})]})]}),e.jsxs("div",{style:{padding:16},children:[e.jsx(ne,{type:"info",message:"权限管理说明",description:"在此页面可以配置每个角色对系统各功能模块的访问权限。管理员角色拥有所有权限且不可修改。权限变更将实时生效。",style:{marginBottom:16}}),c?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px 0"},children:e.jsx(N,{size:"large"})}):Object.entries(Y).map(([i,t])=>{const p=j.filter(S=>S.category===i);return p.length===0?null:e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("h3",{style:{fontSize:16,fontWeight:500,color:"#171717",marginBottom:12},children:t.label}),e.jsx(re,{columns:m,dataSource:p,rowKey:"key",size:"small",bordered:!0,pagination:!1})]},i)})]}),e.jsx(ye,{title:"权限变更历史",open:R,onCancel:()=>T(!1),width:800,footer:null,children:v?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px 0"},children:e.jsx(N,{})}):L.length===0?e.jsx("p",{style:{color:"#737373",textAlign:"center",padding:"24px 0"},children:"暂无变更记录"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,maxHeight:384,overflowY:"auto"},children:L.map((i,t)=>e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("div",{style:{flexShrink:0,marginTop:2},children:i.new_value?e.jsx(q,{style:{fontSize:20,color:"#22c55e"}}):e.jsx(je,{style:{fontSize:20,color:"#ef4444"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontWeight:500,color:"#171717"},children:M[i.role]||i.role}),e.jsx("span",{style:{color:"#737373"},children:"的"}),e.jsx("code",{style:{padding:"2px 6px",background:"#f5f5f5",borderRadius:4,fontSize:14},children:i.permission}),e.jsx("span",{style:{color:"#737373"},children:"权限"}),e.jsx(l,{color:i.new_value?"success":"error",children:i.new_value?"已启用":"已禁用"})]}),e.jsxs("div",{style:{fontSize:12,color:"#a3a3a3",marginTop:4},children:[new Date(i.changed_at).toLocaleString("zh-CN"),i.reason&&` - ${i.reason}`]})]})]},t))})})]})}const ze={core:"核心业务",resource:"资源管理",analytics:"分析报表",admin:"系统管理"},O={admin:"error",manager:"warning",engineer:"blue",technician:"success",viewer:"default"},E={admin:"管理员",manager:"经理",engineer:"工程师",technician:"技术员",viewer:"访客"};function Ie(){const{message:s}=F.useApp(),[c,g]=o.useState(!1),[I,b]=o.useState(null),[f,_]=o.useState(null),R=o.useCallback(async()=>{g(!0);try{const n=await H.getModuleMatrix();_(n)}catch{s.error("获取模块权限矩阵失败")}finally{g(!1)}},[s]);o.useEffect(()=>{R()},[R]);const T=async(n,r,d)=>{if(n==="admin"){s.warning("管理员权限不可修改");return}const x=`${n}-${r}`;b(x);try{if(await H.updateModulePermission(n,r,d),s.success("模块权限已更新"),f){const a={...f},m=a.roles.find(j=>j.role===n);if(m){const j=m.modules.find(i=>i.module_code===r);j&&(j.can_access=d)}_(a)}}catch{s.error("模块权限更新失败")}finally{b(null)}},L=async n=>{try{const r=await H.resetModulePermissionsToDefaults(n);s.success(`已重置 ${r.reset_count} 个模块权限到默认值`),R()}catch{s.error("重置失败")}},P=()=>{if(!f)return[];const n=[],r=f.roles[0];if(!r)return[];for(const d of r.modules){const x={key:d.module_code,module_code:d.module_code,module_label:d.module_label,category:d.category,admin:!0,manager:!1,engineer:!1,technician:!1,viewer:!1};for(const a of f.roles){const m=a.modules.find(j=>j.module_code===d.module_code);m&&(a.role==="admin"?x.admin=m.can_access:a.role==="manager"?x.manager=m.can_access:a.role==="engineer"?x.engineer=m.can_access:a.role==="technician"?x.technician=m.can_access:a.role==="viewer"&&(x.viewer=m.can_access))}n.push(x)}return n},v=(n,r,d)=>{const x=d==="admin",a=`${d}-${r.module_code}`,m=I===a;return e.jsx(Z,{title:x?"管理员权限不可修改":void 0,children:e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(G,{checked:n,disabled:x||m,onChange:j=>T(d,r.module_code,j),size:"small"})})})},y=[{title:"模块名称",dataIndex:"module_label",key:"module_label",width:180,fixed:"left",render:(n,r)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,color:"#171717"},children:String(n)}),e.jsx("div",{style:{fontSize:12,color:"#737373"},children:r.module_code})]})},{title:e.jsx(l,{color:O.admin,children:E.admin}),dataIndex:"admin",key:"admin",width:90,align:"center",render:(n,r)=>v(!!n,r,"admin")},{title:e.jsx(l,{color:O.manager,children:E.manager}),dataIndex:"manager",key:"manager",width:90,align:"center",render:(n,r)=>v(!!n,r,"manager")},{title:e.jsx(l,{color:O.engineer,children:E.engineer}),dataIndex:"engineer",key:"engineer",width:90,align:"center",render:(n,r)=>v(!!n,r,"engineer")},{title:e.jsx(l,{color:O.technician,children:E.technician}),dataIndex:"technician",key:"technician",width:90,align:"center",render:(n,r)=>v(!!n,r,"technician")},{title:e.jsx(l,{color:O.viewer,children:E.viewer}),dataIndex:"viewer",key:"viewer",width:90,align:"center",render:(n,r)=>v(!!n,r,"viewer")}],k=P(),B=["core","resource","analytics","admin"];return e.jsxs("div",{style:{background:"#fff",borderRadius:8,border:"1px solid #e5e5e5",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid #e5e5e5",background:"#fafafa"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(ee,{style:{fontSize:16,color:"#3b82f6"}}),e.jsx("span",{style:{fontWeight:500,color:"#171717"},children:"模块访问权限管理"}),e.jsx(l,{color:"blue",children:"仅管理员可见"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx(se,{title:"重置所有模块权限",description:"确定要将所有角色的模块权限重置为默认值吗？",onConfirm:()=>L(),okText:"确定",cancelText:"取消",children:e.jsx(U,{size:"small",icon:e.jsx(ie,{}),children:"重置为默认"})})})]}),e.jsxs("div",{style:{padding:16},children:[e.jsx(ne,{type:"info",message:"模块权限管理说明",description:"在此页面可以配置每个角色对系统各功能模块的访问权限。管理员角色拥有所有模块访问权限且不可修改。模块权限与操作权限并行生效，用户需要同时具有模块访问权限和操作权限才能执行相应操作。",style:{marginBottom:16}}),c?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px 0"},children:e.jsx(N,{size:"large"})}):B.map(n=>{const r=k.filter(d=>d.category===n);return r.length===0?null:e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("h3",{style:{fontSize:16,fontWeight:500,color:"#171717",marginBottom:12},children:ze[n]||n}),e.jsx(re,{columns:y,dataSource:r,rowKey:"key",size:"small",bordered:!0,pagination:!1})]},n)})]})]})}const X={admin:"系统管理员",manager:"经理",engineer:"工程师",technician:"技术员",viewer:"访客"},K={admin:"error",manager:"warning",engineer:"blue",technician:"success",viewer:"default"};function He(){const{user:s}=ae(),{message:c}=F.useApp(),[g,I]=o.useState("general"),[b,f]=o.useState(!1),[_,R]=o.useState("middle"),T=s?.role===ue.ADMIN,L=()=>{localStorage.setItem("lab_settings",JSON.stringify({compactMode:b,tableSize:_})),c.success("偏好设置已保存")},P=y=>{R(y)},v=[{key:"general",label:e.jsxs("span",{children:[e.jsx(de,{}),"常规设置"]}),children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:24},children:[e.jsx(D,{title:e.jsxs("span",{children:[e.jsx(be,{style:{marginRight:8,color:"#999"}}),"系统信息"]}),size:"small",children:e.jsxs("dl",{style:{margin:0},children:[e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:128,flexShrink:0,fontSize:14,color:"#999"},children:"应用名称"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:"实验室管理系统"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:128,flexShrink:0,fontSize:14,color:"#999"},children:"版本号"}),e.jsx("dd",{style:{margin:0},children:e.jsx(l,{color:"blue",children:"v1.0.0"})})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:128,flexShrink:0,fontSize:14,color:"#999"},children:"API版本"}),e.jsx("dd",{style:{margin:0},children:e.jsx(l,{color:"success",children:"v1"})})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:128,flexShrink:0,fontSize:14,color:"#999"},children:"前端框架"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:"React 19 + TypeScript"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:128,flexShrink:0,fontSize:14,color:"#999"},children:"UI组件库"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:"Ant Design 5.x"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:128,flexShrink:0,fontSize:14,color:"#999"},children:"后端框架"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:"FastAPI + SQLAlchemy"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex"},children:[e.jsx("dt",{style:{width:128,flexShrink:0,fontSize:14,color:"#999"},children:"系统状态"}),e.jsxs("dd",{style:{display:"flex",alignItems:"center",gap:6,margin:0},children:[e.jsx(q,{style:{color:"#52c41a"}}),e.jsx("span",{style:{fontSize:14,color:"#52c41a"},children:"运行正常"})]})]})]})}),e.jsxs(D,{title:e.jsxs("span",{children:[e.jsx(J,{style:{marginRight:8,color:"#999"}}),"当前用户"]}),size:"small",children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{width:80,height:80,margin:"0 auto",borderRadius:"50%",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(J,{style:{fontSize:40,color:"#999"}})}),e.jsx("h3",{style:{marginTop:12,fontSize:18,fontWeight:500,color:"#333"},children:s?.full_name||s?.username}),e.jsx(l,{color:K[s?.role||"viewer"],style:{marginTop:4},children:X[s?.role||"viewer"]})]}),e.jsxs("dl",{style:{margin:0},children:[e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"用户名"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:s?.username})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"邮箱"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:s?.email||"-"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"账号状态"}),e.jsx("dd",{style:{margin:0},children:s?.is_active?e.jsx(l,{color:"success",children:"已激活"}):e.jsx(l,{color:"error",children:"已禁用"})})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"超级管理员"}),e.jsx("dd",{style:{margin:0},children:s?.is_superuser?e.jsx(l,{color:"error",children:"是"}):e.jsx(l,{children:"否"})})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"最后登录"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:s?.last_login?new Date(s.last_login).toLocaleString():"-"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"创建时间"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:s?.created_at?new Date(s.created_at).toLocaleDateString():"-"})]})]})]}),e.jsxs(D,{title:e.jsxs("span",{children:[e.jsx(_e,{style:{marginRight:8,color:"#999"}}),"显示偏好"]}),size:"small",children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:14,fontWeight:500,color:"#333",marginBottom:8},children:"紧凑模式"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(G,{checked:b,onChange:f}),e.jsx("span",{style:{fontSize:14,color:"#999"},children:b?"已启用":"已禁用"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:14,fontWeight:500,color:"#333",marginBottom:8},children:"表格大小"}),e.jsx(pe,{value:_,onChange:P,style:{width:192},options:[{label:"小",value:"small"},{label:"中",value:"middle"},{label:"大",value:"large"}]})]}),e.jsx("hr",{style:{border:"none",borderTop:"1px solid #f0f0f0",margin:"16px 0"}}),e.jsx(U,{type:"primary",onClick:L,children:"保存偏好设置"})]}),e.jsxs(D,{title:e.jsxs("span",{children:[e.jsx(V,{style:{marginRight:8,color:"#999"}}),"安全设置"]}),size:"small",children:[e.jsxs("dl",{style:{margin:0},children:[e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"认证方式"}),e.jsx("dd",{style:{margin:0},children:e.jsx(l,{color:"blue",children:"JWT Token"})})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"Token有效期"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:"24 小时"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"密码策略"}),e.jsx("dd",{style:{fontSize:14,color:"#333",margin:0},children:"最少8位字符"})]}),e.jsxs("div",{style:{padding:"8px 0",display:"flex"},children:[e.jsx("dt",{style:{width:112,flexShrink:0,fontSize:14,color:"#999"},children:"会话状态"}),e.jsxs("dd",{style:{display:"flex",alignItems:"center",gap:6,margin:0},children:[e.jsx(q,{style:{color:"#52c41a"}}),e.jsx("span",{style:{fontSize:14,color:"#52c41a"},children:"已认证"})]})]})]}),e.jsx("hr",{style:{border:"none",borderTop:"1px solid #f0f0f0",margin:"16px 0"}}),e.jsx("p",{style:{fontSize:14,color:"#999",margin:0},children:"如需修改密码或其他安全设置，请联系系统管理员。"})]})]})},{key:"my-permissions",label:e.jsxs("span",{children:[e.jsx(Q,{}),"我的权限"]}),children:e.jsxs(D,{title:e.jsxs("span",{children:[e.jsx(Q,{style:{marginRight:8,color:"#999"}}),"权限列表",e.jsx(l,{color:K[s?.role||"viewer"],style:{marginLeft:8},children:X[s?.role||"viewer"]})]}),children:[e.jsx("p",{style:{fontSize:14,color:"#999",marginBottom:16},children:"以下是您当前角色所拥有的系统权限："}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:16},children:Object.entries(ce).map(([y,k])=>e.jsxs("div",{style:{backgroundColor:"#fafafa",borderRadius:8,border:"1px solid #f0f0f0",padding:12},children:[e.jsx("h4",{style:{fontSize:14,fontWeight:500,color:"#333",marginBottom:8},children:k.label}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:k.permissions.map(B=>{const n=fe(s?.role,B);return e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[n?e.jsx(ve,{style:{color:"#52c41a"}}):e.jsx(xe,{style:{color:"#ff7875"}}),e.jsx("span",{style:{fontSize:12,color:n?"#333":"#bfbfbf"},children:me[B]})]},B)})})]},y))})]})},...T?[{key:"permission-management",label:e.jsxs("span",{children:[e.jsx(V,{}),"操作权限管理",e.jsx(l,{color:"error",style:{marginLeft:4,fontSize:11},children:"管理员"})]}),children:e.jsx(ke,{})},{key:"module-permission-management",label:e.jsxs("span",{children:[e.jsx(ee,{}),"模块权限管理",e.jsx(l,{color:"error",style:{marginLeft:4,fontSize:11},children:"管理员"})]}),children:e.jsx(Ie,{})}]:[]];return e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:20,fontWeight:600,color:"#333",marginBottom:24},children:"系统设置"}),e.jsx(he,{activeKey:g,onChange:y=>I(y),items:v})]})}export{He as default};

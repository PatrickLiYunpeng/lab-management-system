import{i as be,m as Te,aJ as pe,j as xe,aK as H,l as z,r as i,E as se,aL as he,c as I,x as ye,C as Pe,I as ve,f as Ce,a7 as Be,P as n,Q as K,U as We,a0 as ne,A as _e,av as He,a8 as Me,a4 as De,a1 as Fe}from"./index-DVAH8G0d.js";import{h as L}from"./handoverService-BCAbXo0r.js";import{R as Ae}from"./ReloadOutlined-Ci7PDsnU.js";import{R as ue}from"./ExclamationCircleOutlined-CZLhAH0C.js";import{R as Le}from"./CheckOutlined-CP9fMx1j.js";import{M as me}from"./index-D5-92eMw.js";import{R as ke}from"./UnorderedListOutlined-p92xOUYH.js";const Ve=new H("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),Ze=new H("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),qe=new H("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),Ue=new H("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),Xe=new H("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),Ke=new H("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Ye=e=>{const{componentCls:t,iconCls:a,antCls:s,badgeShadowSize:o,textFontSize:f,textFontSizeSM:d,statusSize:C,dotSize:y,textFontWeight:v,indicatorHeight:u,indicatorHeightSM:l,marginXS:m,calc:p}=e,g=`${s}-scroll-number`,j=pe(e,(x,{darkColor:$})=>({[`&${t} ${t}-color-${x}`]:{background:$,[`&:not(${t}-count)`]:{color:$},"a:hover &":{background:$}}}));return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},xe(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:u,height:u,color:e.badgeTextColor,fontWeight:v,fontSize:f,lineHeight:z(u),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:p(u).div(2).equal(),boxShadow:`0 0 0 ${z(o)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:l,height:l,fontSize:d,lineHeight:z(l),borderRadius:p(l).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${z(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:y,minWidth:y,height:y,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${z(o)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${g}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${a}-spin`]:{animationName:Ke,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:C,height:C,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:o,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:Ve,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:m,color:e.colorText,fontSize:e.fontSize}}}),j),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Ze,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:qe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Ue,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:Xe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${g}-custom-component, ${t}-count`]:{transform:"none"},[`${g}-custom-component, ${g}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[g]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${g}-only`]:{position:"relative",display:"inline-block",height:u,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${g}-only-unit`]:{height:u,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${g}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${g}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},je=e=>{const{fontHeight:t,lineWidth:a,marginXS:s,colorBorderBg:o}=e,f=t,d=a,C=e.colorTextLightSolid,y=e.colorError,v=e.colorErrorHover;return Te(e,{badgeFontHeight:f,badgeShadowSize:d,badgeTextColor:C,badgeColor:y,badgeColorHover:v,badgeShadowColor:o,badgeProcessingDuration:"1.2s",badgeRibbonOffset:s,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},Se=e=>{const{fontSize:t,lineHeight:a,fontSizeSM:s,lineWidth:o}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*a)-2*o,indicatorHeightSM:t,dotSize:s/2,textFontSize:s,textFontSizeSM:s,textFontWeight:"normal",statusSize:s/2}},Je=be("Badge",e=>{const t=je(e);return Ye(t)},Se),Qe=e=>{const{antCls:t,badgeFontHeight:a,marginXS:s,badgeRibbonOffset:o,calc:f}=e,d=`${t}-ribbon`,C=`${t}-ribbon-wrapper`,y=pe(e,(v,{darkColor:u})=>({[`&${d}-color-${v}`]:{background:u,color:u}}));return{[C]:{position:"relative"},[d]:Object.assign(Object.assign(Object.assign(Object.assign({},xe(e)),{position:"absolute",top:s,padding:`0 ${z(e.paddingXS)}`,color:e.colorPrimary,lineHeight:z(a),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${d}-text`]:{color:e.badgeTextColor},[`${d}-corner`]:{position:"absolute",top:"100%",width:o,height:o,color:"currentcolor",border:`${z(f(o).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),y),{[`&${d}-placement-end`]:{insetInlineEnd:f(o).mul(-1).equal(),borderEndEndRadius:0,[`${d}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${d}-placement-start`]:{insetInlineStart:f(o).mul(-1).equal(),borderEndStartRadius:0,[`${d}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},Ge=be(["Badge","Ribbon"],e=>{const t=je(e);return Qe(t)},Se),et=e=>{const{className:t,prefixCls:a,style:s,color:o,children:f,text:d,placement:C="end",rootClassName:y}=e,{getPrefixCls:v,direction:u}=i.useContext(se),l=v("ribbon",a),m=`${l}-wrapper`,[p,g,j]=Ge(l,m),x=he(o,!1),$=I(l,`${l}-placement-${C}`,{[`${l}-rtl`]:u==="rtl",[`${l}-color-${o}`]:x},t),b={},w={};return o&&!x&&(b.background=o,w.color=o),p(i.createElement("div",{className:I(m,y,g,j)},f,i.createElement("div",{className:I($,g),style:Object.assign(Object.assign({},b),s)},i.createElement("span",{className:`${l}-text`},d),i.createElement("div",{className:`${l}-corner`,style:w}))))},ge=e=>{const{prefixCls:t,value:a,current:s,offset:o=0}=e;let f;return o&&(f={position:"absolute",top:`${o}00%`,left:0}),i.createElement("span",{style:f,className:I(`${t}-only-unit`,{current:s})},a)};function tt(e,t,a){let s=e,o=0;for(;(s+10)%10!==t;)s+=a,o+=a;return o}const nt=e=>{const{prefixCls:t,count:a,value:s}=e,o=Number(s),f=Math.abs(a),[d,C]=i.useState(o),[y,v]=i.useState(f),u=()=>{C(o),v(f)};i.useEffect(()=>{const p=setTimeout(u,1e3);return()=>clearTimeout(p)},[o]);let l,m;if(d===o||Number.isNaN(o)||Number.isNaN(d))l=[i.createElement(ge,Object.assign({},e,{key:o,current:!0}))],m={transition:"none"};else{l=[];const p=o+10,g=[];for(let b=o;b<=p;b+=1)g.push(b);const j=y<f?1:-1,x=g.findIndex(b=>b%10===d);l=(j<0?g.slice(0,x+1):g.slice(x)).map((b,w)=>{const R=b%10;return i.createElement(ge,Object.assign({},e,{key:b,value:R,offset:j<0?w-x:w,current:w===x}))}),m={transform:`translateY(${-tt(d,o,j)}00%)`}}return i.createElement("span",{className:`${t}-only`,style:m,onTransitionEnd:u},l)};var ot=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]]);return a};const st=i.forwardRef((e,t)=>{const{prefixCls:a,count:s,className:o,motionClassName:f,style:d,title:C,show:y,component:v="sup",children:u}=e,l=ot(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:m}=i.useContext(se),p=m("scroll-number",a),g=Object.assign(Object.assign({},l),{"data-show":y,style:d,className:I(p,o,f),title:C});let j=s;if(s&&Number(s)%1===0){const x=String(s).split("");j=i.createElement("bdi",null,x.map(($,b)=>i.createElement(nt,{prefixCls:p,count:Number(s),value:$,key:x.length-b})))}return d?.borderColor&&(g.style=Object.assign(Object.assign({},d),{boxShadow:`0 0 0 1px ${d.borderColor} inset`})),u?ye(u,x=>({className:I(`${p}-custom-component`,x?.className,f)})):i.createElement(v,Object.assign({},g,{ref:t}),j)});var it=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]]);return a};const rt=i.forwardRef((e,t)=>{var a,s,o,f,d;const{prefixCls:C,scrollNumberPrefixCls:y,children:v,status:u,text:l,color:m,count:p=null,overflowCount:g=99,dot:j=!1,size:x="default",title:$,offset:b,style:w,className:R,rootClassName:N,classNames:S,styles:O,showZero:T=!1}=e,k=it(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:V,direction:M,badge:c}=i.useContext(se),h=V("badge",C),[r,P,Z]=Je(h),D=p>g?`${g}+`:p,F=D==="0"||D===0||l==="0"||l===0,ie=p===null||F&&!T,Y=(u!=null||m!=null)&&ie,we=u!=null||!F,A=j&&!F,B=A?"":D,W=i.useMemo(()=>((B==null||B==="")&&(l==null||l==="")||F&&!T)&&!A,[B,F,T,A,l]),re=i.useRef(p);W||(re.current=p);const _=re.current,ae=i.useRef(B);W||(ae.current=B);const J=ae.current,le=i.useRef(A);W||(le.current=A);const q=i.useMemo(()=>{if(!b)return Object.assign(Object.assign({},c?.style),w);const E={marginTop:b[1]};return M==="rtl"?E.left=Number.parseInt(b[0],10):E.right=-Number.parseInt(b[0],10),Object.assign(Object.assign(Object.assign({},E),c?.style),w)},[M,b,w,c?.style]),Oe=$??(typeof _=="string"||typeof _=="number"?_:void 0),ce=!W&&(l===0?T:!!l&&l!==!0),Ne=ce?i.createElement("span",{className:`${h}-status-text`},l):null,Re=!_||typeof _!="object"?void 0:ye(_,E=>({style:Object.assign(Object.assign({},q),E.style)})),U=he(m,!1),Ee=I(S?.indicator,(a=c?.classNames)===null||a===void 0?void 0:a.indicator,{[`${h}-status-dot`]:Y,[`${h}-status-${u}`]:!!u,[`${h}-color-${m}`]:U}),Q={};m&&!U&&(Q.color=m,Q.background=m);const de=I(h,{[`${h}-status`]:Y,[`${h}-not-a-wrapper`]:!v,[`${h}-rtl`]:M==="rtl"},R,N,c?.className,(s=c?.classNames)===null||s===void 0?void 0:s.root,S?.root,P,Z);if(!v&&Y&&(l||we||!ie)){const E=q.color;return r(i.createElement("span",Object.assign({},k,{className:de,style:Object.assign(Object.assign(Object.assign({},O?.root),(o=c?.styles)===null||o===void 0?void 0:o.root),q)}),i.createElement("span",{className:Ee,style:Object.assign(Object.assign(Object.assign({},O?.indicator),(f=c?.styles)===null||f===void 0?void 0:f.indicator),Q)}),ce&&i.createElement("span",{style:{color:E},className:`${h}-status-text`},l)))}return r(i.createElement("span",Object.assign({ref:t},k,{className:de,style:Object.assign(Object.assign({},(d=c?.styles)===null||d===void 0?void 0:d.root),O?.root)}),v,i.createElement(Pe,{visible:!W,motionName:`${h}-zoom`,motionAppear:!1,motionDeadline:1e3},({className:E})=>{var G,ee;const Ie=V("scroll-number",y),te=le.current,ze=I(S?.indicator,(G=c?.classNames)===null||G===void 0?void 0:G.indicator,{[`${h}-dot`]:te,[`${h}-count`]:!te,[`${h}-count-sm`]:x==="small",[`${h}-multiple-words`]:!te&&J&&J.toString().length>1,[`${h}-status-${u}`]:!!u,[`${h}-color-${m}`]:U});let X=Object.assign(Object.assign(Object.assign({},O?.indicator),(ee=c?.styles)===null||ee===void 0?void 0:ee.indicator),q);return m&&!U&&(X=X||{},X.background=m),i.createElement(st,{prefixCls:Ie,show:!W,motionClassName:E,className:ze,count:J,title:Oe,style:X,key:"scrollNumber"},Re)}),Ne))}),$e=rt;$e.Ribbon=et;var at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},lt=function(t,a){return i.createElement(ve,Ce({},t,{ref:a,icon:at}))},ct=i.forwardRef(lt),dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},ut=function(t,a){return i.createElement(ve,Ce({},t,{ref:a,icon:dt}))},mt=i.forwardRef(ut);const{TextArea:fe}=Me,gt={pending:{label:"待接收",color:"warning"},accepted:{label:"已接收",color:"success"},rejected:{label:"已拒绝",color:"error"},cancelled:{label:"已取消",color:"default"}},ft={normal:{label:"普通",color:"default"},urgent:{label:"紧急",color:"warning"},critical:{label:"关键",color:"error"}};function oe({mode:e="incoming",workOrderId:t,onHandoverChange:a}){const[s,o]=i.useState([]),[f,d]=i.useState(!1),[C,y]=i.useState(!1),[v,u]=i.useState(!1),[l,m]=i.useState(null),[p,g]=i.useState(""),[j,x]=i.useState(""),[$,b]=i.useState(!1),w=i.useRef(!1),R=i.useRef(!0),{message:N}=Be.useApp(),S=i.useCallback(async()=>{d(!0);try{if(e==="incoming"){const r=await L.getPendingHandovers();R.current&&(o(r),w.current=!1)}else{const r={};e==="outgoing"&&(r.my_outgoing=!0),t&&(r.work_order_id=t);const P=await L.getHandovers(r);R.current&&(o(P.items),w.current=!1)}}catch(r){console.error("Failed to fetch handovers:",r),R.current&&!w.current&&(w.current=!0,N.error("获取交接列表失败"))}finally{R.current&&d(!1)}},[e,t,N]);i.useEffect(()=>(R.current=!0,S(),()=>{R.current=!1}),[S]);const O=r=>{m(r),g(""),y(!0)},T=r=>{m(r),x(""),u(!0)},k=async r=>{try{await L.cancelHandover(r.id),N.success("交接已取消"),S(),a?.()}catch{N.error("取消交接失败")}},V=async()=>{if(l){b(!0);try{await L.acceptHandover(l.id,p||void 0),N.success("交接已接收"),y(!1),m(null),S(),a?.()}catch{N.error("接收交接失败")}finally{b(!1)}}},M=async()=>{if(!l||!j.trim()){N.warning("请填写拒绝原因");return}b(!0);try{await L.rejectHandover(l.id,j),N.success("交接已拒绝"),u(!1),m(null),S(),a?.()}catch{N.error("拒绝交接失败")}finally{b(!1)}},c=e==="incoming"?"待接收交接":e==="outgoing"?"我的交接":"所有交接",h=s.filter(r=>r.status==="pending").length;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{background:"#fff",borderRadius:8,border:"1px solid #e5e5e5",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid #e5e5e5"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("h3",{style:{fontSize:16,fontWeight:500,color:"#1f2937",margin:0},children:c}),h>0&&n.jsx($e,{count:h})]}),n.jsx(K,{size:"small",icon:n.jsx(Ae,{}),onClick:S,children:"刷新"})]}),n.jsx("div",{style:{padding:16},children:f?n.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"32px 0"},children:n.jsx(We,{})}):s.length===0?n.jsx("div",{style:{padding:"48px 0",textAlign:"center",color:"#999"},children:"暂无交接记录"}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:s.map(r=>{const P=gt[r.status],Z=ft[r.priority],D=r.status==="pending";return n.jsx("div",{style:{border:"1px solid #e5e5e5",borderRadius:6,padding:16},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap",marginBottom:8},children:[n.jsx("span",{style:{fontWeight:500,color:"#1f2937"},children:r.task?.title||`任务 #${r.task_id}`}),n.jsx(ne,{color:P.color,children:P.label}),r.priority!=="normal"&&n.jsxs(ne,{color:Z.color,children:[n.jsx(ue,{style:{marginRight:4}}),Z.label]})]}),n.jsxs("div",{style:{fontSize:14,color:"#6b7280"},children:[n.jsxs("span",{style:{marginRight:12},children:["工单: ",r.work_order?.order_number||"-"]}),n.jsxs("span",{style:{marginRight:12},children:["来自: ",r.from_technician?.name||"-"]}),r.to_technician&&n.jsxs("span",{children:["分配给: ",r.to_technician.name]})]}),r.progress_summary&&n.jsxs("p",{style:{marginTop:8,fontSize:14,color:"#374151",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:[n.jsx("span",{style:{fontWeight:500},children:"已完成: "}),r.progress_summary]}),r.pending_items&&n.jsxs("p",{style:{marginTop:4,fontSize:14,color:"#374151",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:[n.jsx("span",{style:{fontWeight:500},children:"待完成: "}),r.pending_items]}),r.special_instructions&&n.jsxs("p",{style:{marginTop:4,fontSize:14,color:"#d97706",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:[n.jsx(ue,{style:{marginRight:4}}),r.special_instructions]}),r.notes.length>0&&n.jsx(_e,{title:`${r.notes.length} 条备注`,children:n.jsxs(ne,{style:{marginTop:8},children:[n.jsx(ct,{style:{marginRight:4}}),r.notes.length," 备注"]})})]}),D&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:16},children:[e==="incoming"&&n.jsxs(n.Fragment,{children:[n.jsx(K,{type:"primary",size:"small",icon:n.jsx(Le,{}),onClick:()=>O(r),children:"接收"}),n.jsx(K,{size:"small",danger:!0,icon:n.jsx(He,{}),onClick:()=>T(r),children:"拒绝"})]}),e==="outgoing"&&n.jsx(K,{size:"small",onClick:()=>k(r),children:"取消"})]})]})},r.id)})})})]}),n.jsxs(me,{title:"接收交接",open:C,onOk:V,onCancel:()=>y(!1),confirmLoading:$,okText:"确认接收",cancelText:"取消",children:[n.jsx("p",{style:{marginBottom:12},children:"确认接收此任务的交接？"}),n.jsx(fe,{rows:3,placeholder:"接收备注（可选）",value:p,onChange:r=>g(r.target.value)})]}),n.jsxs(me,{title:"拒绝交接",open:v,onOk:M,onCancel:()=>u(!1),confirmLoading:$,okText:"确认拒绝",cancelText:"取消",children:[n.jsx("p",{style:{marginBottom:12},children:"请填写拒绝原因："}),n.jsx(fe,{rows:3,placeholder:"拒绝原因（必填）",value:j,onChange:r=>x(r.target.value)})]})]})}function jt(){const[e,t]=i.useState("incoming"),a=[{key:"incoming",label:n.jsxs("span",{children:[n.jsx(Fe,{}),"待接收"]}),children:n.jsx(oe,{mode:"incoming"})},{key:"outgoing",label:n.jsxs("span",{children:[n.jsx(mt,{}),"我发起的"]}),children:n.jsx(oe,{mode:"outgoing"})},{key:"all",label:n.jsxs("span",{children:[n.jsx(ke,{}),"全部交接"]}),children:n.jsx(oe,{mode:"all"})}];return n.jsx("div",{children:n.jsx(De,{activeKey:e,onChange:s=>t(s),items:a})})}export{jt as default};

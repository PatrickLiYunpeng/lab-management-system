#!/bin/bash
# 数据库重置脚本
# 用于开发环境重置数据库并重新填充种子数据

set -e

echo "=================================================="
echo "实验室管理系统 - 数据库重置"
echo "=================================================="

cd "$(dirname "$0")/.."

# 删除现有数据库
if [ -f "lab_management.db" ]; then
    echo "删除现有数据库..."
    rm lab_management.db
fi

# 运行迁移
echo "运行数据库迁移..."
python3 -m alembic upgrade head

# 填充种子数据
echo "填充种子数据..."
python3 scripts/seed_data.py

echo ""
echo "=================================================="
echo "数据库重置完成！"
echo "=================================================="
